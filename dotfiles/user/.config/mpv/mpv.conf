##################
#   mpv config   #
##################

#log-file=~/local/state/mpv/mpv.log

save-position-on-quit

watch-later-directory=~/.local/state/mpv/watch_later

# Screenshots
screenshot-directory=~/Media/Screenshots
screenshot-format=jxl
screenshot-png-compression=0
screenshot-tag-colorspace=yes
screenshot-high-bit-depth=yes

##################
#     UI/UX      #
##################

# OSD
osd-scale=1
osd-font-size=55
#script-opts=osc-layout=box,osc-seekbarstyle=slider,osc-deadzonesize=0,osc-minmousemove=3

# NOGUI
term-osd-bar
term-osd-bar-chars="╞═╡ │"

#osd-bar=no
border=no

# Force starting with centered window
#geometry=50%:50%

# Don't allow a new window to have a size larger than 90% of the screen size
#autofit-larger=90%x90%

# Do not close the window on exit.
#keep-open=yes

# Do not wait with showing the video window until it has loaded. (This will
# resize the window once video is loaded. Also always shows a window with
# audio.)
#force-window=immediate

# Disable the On Screen Controller (OSC).
#osc=no

# Keep the player window on top of all other windows.
#ontop=yes

# Cursor
cursor-autohide-fs-only
cursor-autohide=1000

# Subs
embeddedfonts=yes
sub-auto=all

demuxer-mkv-subtitle-preroll=yes

blend-subtitles=video
#sub-bold=yes
#sub-file-paths=Subs:Subtitles:Eng:Rus
sub-ass-override=strip
slang=en,eng
sub-font=Exo 2


##################
# Video Settings #
##################

# Start in fullscreen mode by default.
#fs=yes

# Video aspect ratio
#video-aspect-override=16:9
#keepaspect=no

force-seekable

# Use GPU-accelerated video output by default.
vo=gpu-next
#gpu-api=vulkan

# HQ video rendering preset
#profile=gpu-hq

# Framedropping
#hr-seek-framedrop=no
#framedrop=no
#vd-lavc-framedrop=none

# High quality scaling
scale=ewa_lanczos
cscale=ewa_lanczos
scale-blur=0.981251

# Low quality scaling
#scale=bilinear
#cscale=bilinear

# X11
#gpu-context=x11egl
#x11-bypass-compositor=no

# Wayland
#gpu-context=wayland
#wayland-disable-vsync=yes

# Force video to lock on the display's refresh rate, and change video and audio
# speed to some degree to ensure synchronous playback - can cause problems
# with some drivers and desktop environments.
# CPU HARD
#video-sync=display-resample

# Interpolation
interpolation=yes
#tscale=oversample

# Enable hardware decoding if available.
hwdec=auto

target-trc=srgb
gamma-factor=1.1

###########
# Filters #
###########
#af=drc=2
#af=lavfi=[dynaudnorm=g=5:f=250:r=0.9:p=0.5]
#af=lavfi=[loudnorm=I=-16:TP=-3:LRA=4]
af-add=scaletempo2
#af-add='dynaudnorm=g=5:f=250:r=0.9:p=0.5'
#af-add='dynaudnorm=m=5:n=0:g=15:f=250:r=0.5:p=0.9'
ad-lavc-ac3drc=1
ad-lavc-downmix=yes
ad-lavc-threads=0


# Experimental
#opengl-pbo

#opengl-swapinterval=1

##################
# Audio Settings #
##################

ao=pipewire,pulse,alsa
alsa-resample=no

openal-direct-channels=no

#audio-normalize-downmix=yes

# Disable player window appearance on audio file playback
audio-display=no

# Do not filter audio to keep pitch when changing playback speed.
#audio-pitch-correction=no

# Volume
volume=100
volume-max=150

# Format
#audio-channels=stereo
#audio-samplerate=96000
#audio-format=float

# Play English audio if available.
alang=en,eng

##################
# Other Settings #
##################

autocreate-playlist=filter

# Subs
sub-auto=all
#sub-font='Noto Color Emoji'

demuxer-mkv-subtitle-preroll=yes

blend-subtitles=video

# Cache settings
#

#cache=no

# Use a large seekable RAM cache even for local input.
#cache=yes
#demuxer-seekable-cache=yes
#
# Use extra large RAM cache (needs cache=yes to make it useful).
#demuxer-max-bytes=800M
#demuxer-max-back-bytes=200M
#
# Disable the behavior that the player will pause if the cache goes below a
# certain fill size.
#cache-pause=no
#
## Store cache payload on the hard disk instead of in RAM. (This may negatively
# impact performance unless used for slow input such as network.)
#cache-dir=~/.cache/
#cache-on-disk=yes

# You can also include other configuration files.
#include=/path/to/the/file/you/want/to/include


###########
# Youtube #
###########

ytdl-format=bestvideo[height<=?1080][fps<=?60]+bestaudio/best
ytdl-raw-options=sub-lang="en",write-sub=,write-auto-sub=

############
# Profiles #
############

[wayland]
vo=gpu
hwdec=auto
gpu-context=wayland

[powersave]
gpu-api=auto
interpolation=no
tscale=linear
scale=bilinear
cscale=bilinear

# File Type Profiles
# GIF Files
[extension.gif]
cache=no
no-pause
loop-file=yes
# WebM Files
[extension.webm]
no-pause
loop-file=yes
# Music
[extension.mp3]
no-resume-playback

[twitch]
profile-cond=get("path", ""):find("^https://www.twitch.tv/") ~= nil
profile-restore=copy-equal
sub-font-size=30
sub-align-x=right
sub-align-y=top
cache=no
